\lhead[]{}
\rhead[]{}
\chead[GebとSpockではじめるエンドツーエンドテスト]{GebとSpockによるエンドツーエンドテスト}

# GebとSpockではじめるエンドツーエンドテスト

本稿では、Groovyを使用したSelenium WebDriver拡張のブラウザー自動化ツールであるGebと、
同じくGroovyを用いるSpockを使用した、エンドツーエンドのテストについて述べます。

## アジャイルテストの四象限

自動化されたユニットテストに代表される、開発者によるプログラムに対して行なうテスト以外にも、
ソフトウェアテストには複数の軸と象限が存在します。
セキュリティー、パフォーマンス、ユーザビリティーなどの非機能要件に対するテスト、
システムの完成度を高めるための探索的テストなど、前章で述べたようなシステムの受け入れ要件を
確認するためのテストなどです。

Lisa Crisping氏とJanet Gregory氏は「Agile Testing」[@Crispin2009]^[邦訳「実践アジャイルテスト」]の中で、
その軸を「チームを支援するテストと、製品を評価するテスト」「ビジネス面のテストと、技術面のテスト」に
分類して、「アジャイルテストの四象限」としています。

Gregory氏とCrisping氏は更にその後、「More Agile Testing」[@Gregory2015]の中でMichael Hüttermann氏
の議論[@Huttermann2011]を取り込む形で、「アジャイルテストの四象限」について稿を改めています。 [@fig:030_a_image]

Hüttermann氏は、アジャイル開発の中で、テストを通じてステークホルダーが協調するポイントとして、
以下の3つのポイントをあげています。

- Outside-in
- Barrier-free
- Collaborative

「More Agile Testing」では、この視野を取り込んだ上で、四象限の中での「チームを支援するテスト」という
軸を、「開発の手引きとなるテスト」と改めています。

![アジャイルテストの四象限](src/img/agiletesting.png){#fig:030_a_image}

本稿では、[@fig:030_a_image]の中で、主に左上の象限に位置する、開発プロセスに於いてビジネスの側面を
テストの自動化についてフォーカスします。
その上で、プログラミング言語Apache Groovy ^[以下Groovy]^[[http://groovy-lang.org/](http://groovy-lang.org/)]によって記述されたブラウザー自動化ツールであるGebと、
同じくGroovyによって記述されたテスティングフレームワークである
Spockによるエンドツーエンドの手法について述べます。

## エンドツーエンドテスト

「xUnit」と総称されるテスティングフレームワークによって書かれてるテストは、
システムの最小構成単位であるメソッドや関数に対してのテストを最も小さい粒度としています。
テストの粒度を大きい範囲にすることもできますが、
メソッドや関数の集合体としてのAPIのエンドポイントを単体にないし複数回シナリオとして呼び出すのが
最も大きな範囲となります。

これに対しエンドツーエンドのテストは、ユーザーが実際にシステムに呼び出す時の操作を
シミュレートしてテストを行います。本稿で取り上げるGebでは、クロスブラウザーの
Webブラウザー操作自動化APIであるSelenium WebDriverを使用して
Webブラウザー上でのユーザーの操作に対してテストを行います。

## Geb

Gebは、Luke Daley氏、Marcin Erdmann氏、Chris Prior氏が中心となって開発を進めている
オープンソースソフトウェアで、[http://gebish.org/](http://gebish.org/)で公開されています。
ライセンスはApache License Version 2.0です。
Gebは、Groovyの言語機能を生かした簡潔な記述と、
jQueryライクなDOMへアクセスするための式言語が特徴となっています。



## GebとSpockによるエンドツーエンドテスト

## ページオブジェクト



## Gebによるクロスブラウザーでのテスト

## 

## テスト自動化ピラミッド

## Webアプリケーションにおけるエンドツーエンドテストの役割
